"Filed out from Dolphin Smalltalk X6.2"!

WebApplicationServerShell subclass: #StsServerShell
	instanceVariableNames: ''
	classVariableNames: 'ServerPort'
	poolDictionaries: ''
	classInstanceVariableNames: ''!
StsServerShell guid: (GUID fromString: '{EAA9D5BC-CCA3-43CC-A0A1-D27680BEB3F6}')!
StsServerShell comment: ''!
!StsServerShell categoriesForClass!Unclassified! !
!StsServerShell methodsFor!

buttonClickedCreateDatabaseBackup
	self omniBaseApps do: [:each | self makeOmniBaseBackupFor: each]!

buttonClickedResetApplications
	self restart.
	self buttonClickedRefreshList!

buttonClickedShutdown
	self stop.
	self buttonClickedRefreshList!

createSchematicWiring
	"Private - Create the trigger wiring for the receiver"

	super createSchematicWiring.
	self 
		when: #timerTick:
		send: #onTimerTick:
		to: self!

isDebuggerDisabled
	"Answer true if the debugger should be disabled so as to not block failed server requests"

	^true!

makeOmniBaseBackupFor: application 
	| db |
	db := application db class openOn: application omniBasePath.
	
	[db 
		createBackupOn: application dbBackupLocalDirectory , '/' , application applicationPath 
				, '-ODB-' , Timestamp now asFilenameString] 
			ensure: [db close]!

onSessionStarted
	
	[self
		stopWebServer;
		startWebServer;
		startServerApplications;
		registerTimer] 
			postToInputQueue!

onTimerTick: id 
	self buttonClickedRefreshList!

onViewClosed
	self stop.
	super onViewClosed!

onViewOpened
	super onViewOpened.
	self start.
	self registerForSessionManagerEvents!

queryCommand: query 
	"Private - Enters details about a potential command for the receiver into the 
	<CommandQuery>,  query."

	| command |
	command := query command.
	#buttonClickedShutdown == command 
		ifTrue: 
			[query isEnabled: self serverInstance notNil.
			^true].
	^super queryCommand: query!

reconnectServerApplications
	StsServerApplication default connectToDatabase!

registerForSessionManagerEvents
	SessionManager current 
		when: #sessionStarted
		send: #onSessionStarted
		to: self!

registerTimer
	self view setTimer: 1 interval: self updateInterval!

restart
	self
		stop;
		start!

serverInstance
	^serverInstance!

start
	self startWebServer.
	self startServerApplications.
	self registerTimer!

startServerApplications
	StsServerApplication default startup.
	self isDebuggerDisabled ifTrue: [StsServerApplication default disableDebuggerInServerMode]!

startWebServer
	serverInstance := WebHttpServer startupOnPort: self class serverPort!

stop
	self unregisterTimer.
	self stopServerApplications.
	self stopWebServer!

stopServerApplications
	self activeApplications do: [:each | each shutdown]!

stopWebServer
	self serverInstance ifNil: [^self].
	self serverInstance shutdown.
	serverInstance := nil!

unregisterTimer
	self view killTimer: 1!

updateInterval
	^1000! !
!StsServerShell categoriesFor: #buttonClickedCreateDatabaseBackup!public! !
!StsServerShell categoriesFor: #buttonClickedResetApplications!commands!public! !
!StsServerShell categoriesFor: #buttonClickedShutdown!commands!public! !
!StsServerShell categoriesFor: #createSchematicWiring!initializing!private! !
!StsServerShell categoriesFor: #isDebuggerDisabled!public! !
!StsServerShell categoriesFor: #makeOmniBaseBackupFor:!operations!private! !
!StsServerShell categoriesFor: #onSessionStarted!event handling!private! !
!StsServerShell categoriesFor: #onTimerTick:!private! !
!StsServerShell categoriesFor: #onViewClosed!private! !
!StsServerShell categoriesFor: #onViewOpened!private! !
!StsServerShell categoriesFor: #queryCommand:!commands!private! !
!StsServerShell categoriesFor: #reconnectServerApplications!operations!private! !
!StsServerShell categoriesFor: #registerForSessionManagerEvents!helpers!private! !
!StsServerShell categoriesFor: #registerTimer!private! !
!StsServerShell categoriesFor: #restart!operations!public! !
!StsServerShell categoriesFor: #serverInstance!public! !
!StsServerShell categoriesFor: #start!operations!public! !
!StsServerShell categoriesFor: #startServerApplications!operations!private! !
!StsServerShell categoriesFor: #startWebServer!operations!private! !
!StsServerShell categoriesFor: #stop!operations!public! !
!StsServerShell categoriesFor: #stopServerApplications!operations!private! !
!StsServerShell categoriesFor: #stopWebServer!operations!private! !
!StsServerShell categoriesFor: #unregisterTimer!private! !
!StsServerShell categoriesFor: #updateInterval!constants!private! !

!StsServerShell class methodsFor!

defaultPort
	 ^8000!

displayOn: aStream
	"Append, to aStream, a String whose characters are a representation of the receiver as a user
	would want to see it."

	aStream nextPutAll: 'Source Tracking Server'!

icon

	"Generated from:
	self createIconMethod: #icon ofSize: 48@48 fromFile: 'C:\Object Arts\Dev\Dolphin6\ITC Gorisek\StsServerShell.png'.
	"
	^InternalIcon fromBytes: #[137 80 78 71 13 10 26 10 0 0 0 13 73 72 68 82 0 0 0 48 0 0 0 48 8 6 0 0 0 87 2 249 135 0 0 0 1 115 82 71 66 0 174 206 28 233 0 0 0 4 103 65 77 65 0 0 177 143 11 252 97 5 0 0 0 9 112 72 89 115 0 0 14 195 0 0 14 195 1 199 111 168 100 0 0 17 39 73 68 65 84 104 67 229 90 121 92 142 89 27 46 75 218 247 66 145 72 150 33 36 35 77 38 180 151 210 30 10 69 201 12 6 165 25 12 138 178 164 36 75 101 173 148 22 33 70 24 83 169 20 49 214 207 216 201 58 6 83 74 145 45 222 222 235 187 207 169 247 85 166 73 195 124 127 125 253 126 215 239 156 231 188 207 115 63 247 117 206 125 174 251 156 243 36 33 241 255 246 231 225 225 161 100 103 103 23 52 124 248 240 77 46 46 46 238 196 95 242 19 250 160 141 171 171 171 51 217 216 104 111 111 31 66 118 52 63 193 198 63 127 196 201 201 201 223 192 192 64 208 191 127 127 136 48 120 240 224 10 103 103 103 181 214 90 115 116 116 236 72 207 60 105 108 163 191 129 65 29 145 152 211 90 27 159 116 223 136 81 35 22 245 234 213 11 12 189 27 202 250 122 111 12 24 48 160 214 216 216 248 198 152 49 99 204 90 50 62 98 196 8 249 190 125 251 214 138 236 52 46 169 29 100 227 17 141 200 246 79 114 176 165 135 70 142 28 105 163 211 77 7 58 221 186 17 88 249 30 221 187 119 71 239 222 189 161 79 100 244 244 244 48 106 212 168 126 205 217 162 208 147 234 217 179 103 85 115 54 152 61 70 128 17 162 123 240 229 151 95 30 252 215 72 80 239 202 117 236 216 241 173 166 166 38 154 67 167 78 157 208 163 71 15 116 35 114 93 186 118 129 142 142 78 53 245 116 187 15 29 24 52 104 208 193 191 179 193 218 153 13 93 93 93 116 237 218 21 90 90 90 48 53 53 181 251 87 72 80 204 103 40 40 40 64 132 33 70 3 144 181 59 9 103 127 61 130 115 167 243 113 36 103 15 216 40 116 238 220 25 68 20 106 106 106 160 201 25 222 248 229 134 134 134 221 232 121 161 200 134 170 170 10 162 86 45 198 169 146 195 248 237 92 33 47 103 206 240 131 182 182 54 58 145 13 117 13 117 104 168 107 188 32 27 109 62 155 132 140 180 204 107 41 41 41 40 43 202 224 254 169 48 160 44 27 168 200 1 42 243 235 81 145 139 85 97 1 220 113 101 101 101 78 84 78 78 78 72 19 222 128 66 193 197 205 205 205 152 66 99 133 84 123 41 180 111 223 30 225 65 163 32 124 148 1 60 57 76 207 230 53 216 200 67 205 239 251 168 3 52 161 170 170 10 69 69 37 200 203 203 179 185 101 254 185 4 36 219 180 105 243 150 140 224 222 65 87 8 175 46 132 240 246 26 8 239 110 128 240 126 124 61 238 198 226 93 105 52 116 187 106 50 199 233 197 10 232 211 167 143 88 165 152 218 244 235 215 175 174 3 57 63 113 116 15 8 207 127 3 97 233 42 8 239 172 135 240 94 92 189 13 86 222 89 135 141 43 61 232 121 57 200 200 200 160 131 84 7 244 237 221 107 195 103 17 184 144 50 165 255 208 190 106 53 186 157 229 80 119 98 2 132 167 125 32 252 207 76 8 47 6 17 130 27 64 245 243 51 241 226 248 68 26 118 101 62 25 155 3 35 181 248 27 51 220 216 235 9 225 185 105 16 254 54 135 158 159 219 96 131 202 223 102 67 120 54 0 126 174 125 249 72 181 107 215 14 251 150 142 188 241 89 4 158 231 76 115 121 158 101 139 91 59 29 32 40 246 134 240 56 145 56 78 101 201 68 8 79 16 153 147 4 86 167 182 187 89 110 164 66 61 248 100 108 14 95 124 241 5 39 198 20 203 211 222 144 158 35 91 37 147 200 134 111 125 201 174 201 78 221 177 9 72 9 53 69 39 85 105 84 166 154 11 63 139 64 85 150 175 121 117 166 29 94 255 236 129 119 133 62 16 28 245 69 93 17 189 176 152 112 204 143 94 250 45 175 191 46 152 136 158 221 235 213 227 175 208 230 109 250 250 250 92 34 217 132 39 165 66 122 152 117 189 157 11 75 234 75 66 221 209 250 119 212 230 142 199 179 125 78 120 146 108 41 248 44 2 40 12 82 175 72 181 21 190 218 239 129 218 252 105 16 20 126 11 65 193 84 122 81 0 245 28 13 251 185 48 94 31 111 211 143 79 190 150 192 228 145 73 109 215 46 93 26 20 75 19 53 185 212 9 151 98 168 83 152 237 0 194 55 212 81 223 224 205 225 73 120 182 203 17 21 251 167 148 124 22 1 246 240 147 12 143 147 207 119 58 225 77 206 116 188 45 12 34 2 115 8 223 161 238 124 52 234 46 110 68 245 161 105 80 160 137 199 38 176 44 65 91 75 3 41 91 66 33 168 185 12 188 188 65 184 201 203 139 103 178 155 72 173 178 138 10 156 70 13 32 27 241 16 20 5 147 205 89 228 124 32 117 84 32 94 238 29 135 39 41 118 117 229 123 124 245 63 155 0 32 33 89 153 234 242 184 38 203 27 181 5 63 18 137 5 244 162 121 16 156 89 3 193 217 24 100 44 113 226 19 142 193 108 136 54 4 165 171 73 38 51 129 242 159 72 42 15 212 163 60 27 194 63 247 226 139 62 61 160 66 142 43 42 114 169 133 172 172 44 94 150 68 226 221 241 165 100 119 62 97 33 94 31 158 137 170 212 49 120 250 211 244 22 151 37 255 136 88 197 161 89 86 149 201 14 120 149 59 31 181 69 225 120 91 76 40 162 151 18 146 67 220 193 100 150 65 240 43 77 196 203 243 73 38 35 72 110 163 73 26 99 72 102 215 82 157 202 91 171 81 121 46 4 114 164 239 92 38 59 116 224 106 243 228 208 2 110 175 182 120 25 94 23 46 65 117 134 39 197 190 243 35 132 134 126 126 18 107 204 178 60 99 108 110 101 170 27 94 29 93 142 55 37 81 168 61 185 134 163 114 175 23 100 59 180 67 244 108 67 212 157 108 144 90 166 245 23 72 22 185 220 50 4 146 252 126 71 50 57 21 39 183 59 144 243 82 124 196 212 149 58 224 69 222 15 168 45 137 198 235 99 145 120 126 40 16 101 137 246 168 222 31 216 243 31 245 112 107 110 222 181 203 163 237 131 36 151 235 79 127 154 129 154 162 72 188 40 137 225 168 76 183 69 245 94 122 233 97 119 154 140 76 10 69 82 75 229 73 38 147 36 181 39 154 202 228 227 108 119 104 169 203 226 80 216 80 84 101 251 83 14 137 198 179 130 165 120 180 205 30 247 51 124 191 110 141 63 159 116 207 177 53 54 75 243 195 135 209 176 207 67 85 225 10 142 138 116 71 212 236 115 64 109 206 88 146 64 31 46 133 194 226 70 56 255 163 248 186 174 168 254 247 119 249 222 36 205 238 40 39 242 21 251 167 209 138 100 57 238 108 29 131 221 243 7 225 114 172 135 252 39 57 215 154 135 110 36 58 46 189 18 63 18 153 11 141 113 42 126 44 206 109 246 194 111 49 102 168 206 28 77 14 141 199 219 2 38 133 36 137 5 254 228 168 63 57 78 25 247 242 90 26 25 127 106 39 144 4 179 223 107 143 248 227 85 182 7 158 166 217 226 250 118 111 28 88 98 134 252 149 166 120 152 104 254 47 19 32 5 50 62 210 191 163 195 17 115 231 222 190 221 15 186 153 106 61 127 145 49 26 21 59 93 113 109 171 51 174 108 113 162 94 116 70 69 178 13 94 236 245 192 155 188 239 72 73 102 147 147 223 145 179 51 80 87 28 92 47 147 13 215 130 194 89 252 247 215 63 251 225 89 166 51 202 147 172 113 113 211 24 60 216 225 138 26 186 126 176 217 28 154 202 10 183 202 188 124 151 9 253 167 247 19 186 7 202 180 166 99 255 114 143 69 158 133 154 209 129 222 7 244 119 119 126 174 187 83 21 12 90 241 10 104 219 86 2 21 137 182 120 153 225 129 87 89 19 9 147 240 50 211 19 85 219 237 81 149 230 72 142 81 239 22 204 35 39 191 39 167 231 162 238 236 26 34 176 133 38 119 56 73 111 48 181 211 132 205 159 135 23 123 188 80 153 98 143 23 153 227 200 134 15 94 238 242 66 77 154 19 124 71 116 129 141 170 58 4 86 180 116 33 188 179 114 20 10 156 61 75 49 107 78 0 201 220 199 247 222 163 242 191 210 51 220 175 127 77 228 244 135 165 116 255 54 24 209 87 141 28 118 64 245 14 15 2 115 126 12 156 134 116 194 185 72 51 60 75 167 81 40 88 136 183 71 67 9 33 228 244 66 188 163 220 241 174 112 17 111 171 45 12 197 171 195 115 80 181 99 12 202 182 217 162 42 217 21 213 169 100 35 217 5 199 195 205 208 70 82 2 101 195 45 197 4 68 68 234 201 56 8 5 126 211 66 136 72 243 242 218 63 91 207 185 91 134 74 221 223 57 207 218 117 82 149 209 86 78 2 58 106 178 248 101 161 9 242 151 152 162 143 182 2 36 164 37 96 180 93 147 66 194 30 207 247 79 199 235 162 229 168 61 22 129 218 227 17 120 75 96 101 109 113 4 94 21 134 83 146 114 199 221 88 75 180 111 43 137 101 227 250 162 100 153 25 230 58 234 113 231 147 251 14 104 214 249 38 68 236 156 239 131 182 167 77 194 198 40 187 151 186 118 170 124 157 118 170 28 116 210 149 121 200 252 29 116 210 148 33 59 162 189 56 121 201 12 110 135 174 41 74 252 254 160 148 222 120 146 228 128 154 124 234 233 227 81 120 125 98 45 222 252 186 142 202 24 188 44 142 36 125 159 142 178 4 59 188 113 26 141 156 1 67 32 219 182 45 183 163 68 57 225 228 224 97 31 117 94 96 102 3 193 215 214 16 248 248 255 220 132 192 176 3 95 248 104 165 200 65 132 174 169 138 232 150 166 2 93 2 43 57 210 63 172 43 83 59 67 195 111 13 191 175 221 96 128 63 41 52 158 21 46 67 205 177 40 212 28 95 131 231 197 171 80 149 23 130 135 91 108 145 53 123 8 4 150 245 49 46 176 36 245 154 25 132 181 161 161 176 181 181 101 7 2 48 55 55 231 165 157 141 53 138 3 102 64 96 237 8 129 197 232 122 199 135 91 113 188 27 110 213 116 153 109 156 213 111 169 86 162 44 154 32 137 70 35 89 9 221 82 200 193 127 128 249 27 244 145 241 131 33 238 165 120 161 162 96 57 42 11 86 210 206 49 12 151 214 89 97 247 2 67 68 45 234 3 214 147 53 73 59 104 245 170 2 105 25 105 190 138 29 96 208 31 214 214 214 112 112 112 16 19 97 100 24 60 137 156 96 232 200 38 104 50 2 38 187 13 146 59 111 145 67 115 208 162 246 46 219 104 68 18 169 183 57 136 144 184 46 106 123 255 219 234 164 190 184 151 96 129 95 150 153 82 190 248 26 191 198 56 32 125 190 9 74 162 71 224 207 237 150 88 18 213 31 179 103 205 130 249 168 145 232 209 93 23 167 79 159 198 221 59 119 113 239 238 61 220 189 123 87 12 118 253 199 31 127 192 219 219 155 147 96 168 112 25 15 193 64 19 14 4 4 180 23 147 48 216 161 155 219 41 78 14 98 196 54 212 27 151 172 78 232 76 208 138 147 39 89 109 64 156 2 58 69 245 68 199 16 7 72 15 236 14 23 147 142 120 145 78 75 139 76 87 220 163 80 186 66 249 226 81 186 59 215 249 154 61 99 65 135 95 220 153 248 248 120 238 236 147 39 79 80 124 52 31 105 73 9 8 154 53 19 14 118 182 152 236 59 9 33 139 23 227 198 141 27 184 119 239 30 254 44 251 83 60 42 121 246 206 16 232 27 2 78 62 202 98 2 134 73 189 46 116 90 35 139 102 17 253 65 59 191 150 71 199 240 129 208 152 17 5 205 169 201 208 244 79 229 80 176 91 68 139 52 201 134 92 65 11 191 61 19 120 174 120 181 219 27 53 148 59 188 188 189 184 243 204 49 230 252 253 219 165 200 202 72 195 129 253 251 80 152 127 4 14 182 54 48 26 52 8 186 180 99 155 234 239 15 105 90 177 154 154 126 133 210 91 165 252 126 54 79 216 243 53 67 205 241 122 210 84 61 49 1 253 88 173 135 29 35 100 33 130 230 114 25 113 189 113 59 171 107 126 63 14 26 254 137 208 240 75 249 11 212 167 164 64 82 70 25 102 148 43 158 146 26 85 167 122 224 89 218 56 202 23 110 184 121 225 4 127 121 113 113 49 239 213 87 47 95 98 211 218 104 68 175 12 199 226 121 193 216 179 107 39 190 241 247 195 20 95 31 12 232 223 15 137 9 9 124 197 202 84 138 29 215 248 79 245 199 253 251 247 223 135 147 163 203 48 78 32 52 52 180 157 110 132 122 133 102 184 12 68 80 255 81 90 92 23 183 47 81 129 250 148 13 208 152 188 189 69 168 140 143 163 5 72 27 34 161 138 171 49 150 40 79 24 77 235 38 31 138 121 115 88 88 88 240 88 127 94 93 133 140 148 36 36 110 138 69 124 204 106 92 186 124 25 165 55 75 177 106 213 42 120 122 122 194 198 198 6 115 2 3 249 241 12 35 192 136 176 67 179 235 215 175 163 186 186 154 147 176 179 181 185 122 246 236 217 246 18 91 183 110 237 168 102 163 80 173 177 88 6 34 168 205 146 22 215 69 109 74 222 49 80 26 191 25 106 147 182 65 221 231 61 52 124 18 32 2 107 215 32 40 123 172 133 68 7 57 254 114 150 160 246 238 205 130 62 157 155 150 151 151 163 186 170 10 73 155 227 81 148 159 135 211 39 75 112 241 226 69 228 229 229 137 243 138 104 115 36 41 41 201 143 26 217 9 71 241 177 98 28 62 124 152 230 109 0 31 61 27 107 27 78 226 241 227 199 114 18 177 177 177 157 244 122 233 157 145 144 167 132 50 174 3 212 231 73 67 193 81 10 26 11 136 196 252 122 168 5 234 67 105 108 28 33 158 67 213 123 19 212 39 110 110 17 106 19 54 67 201 121 37 148 71 47 230 103 170 108 27 201 122 191 182 182 22 203 67 23 33 54 58 18 85 52 18 235 98 214 252 197 121 17 9 86 178 81 80 84 84 228 251 110 101 101 37 220 190 125 27 47 41 252 24 129 136 136 136 97 18 108 24 46 95 190 220 211 210 206 50 73 70 86 230 41 45 153 234 164 21 164 171 213 191 151 134 122 112 61 84 252 109 161 232 190 174 9 148 61 55 64 205 43 254 3 196 253 165 205 36 56 157 142 29 85 225 71 241 253 224 143 7 72 79 78 66 240 172 25 88 181 60 28 37 39 74 90 116 158 17 104 75 217 154 141 132 182 86 103 116 215 237 134 236 236 108 62 10 140 0 125 107 184 206 231 1 128 118 52 65 84 110 222 188 217 229 210 165 75 122 140 208 230 236 205 110 250 139 181 127 87 159 43 45 84 158 48 17 138 174 171 155 133 146 251 26 168 141 93 7 181 113 205 227 219 184 28 24 25 26 114 189 103 241 59 97 172 7 188 61 220 144 147 147 3 159 137 19 62 74 128 185 199 14 196 6 15 26 8 227 33 70 136 138 138 228 35 201 8 12 249 114 72 211 140 76 68 36 27 208 134 74 217 7 15 30 116 201 41 206 49 237 225 183 234 182 130 83 4 90 130 162 115 4 148 92 35 161 234 30 5 85 143 213 98 44 220 94 192 95 198 146 82 101 101 5 2 252 38 83 226 186 131 99 199 142 161 27 157 21 53 14 151 191 171 155 152 152 96 172 135 59 206 157 57 131 204 204 157 156 0 91 110 208 7 17 246 252 223 255 49 50 44 196 122 76 89 127 69 193 113 25 205 141 214 32 188 201 125 51 214 31 16 107 127 121 121 25 12 7 26 192 198 202 18 69 69 69 232 71 61 219 26 2 76 189 102 125 27 128 233 83 253 48 55 40 144 19 96 207 210 233 119 235 142 30 213 221 150 151 202 219 135 160 30 161 13 165 168 222 248 90 116 207 251 210 108 246 38 78 96 203 150 45 76 53 96 109 105 1 173 206 157 48 99 250 116 76 108 101 8 177 99 201 21 75 67 176 100 225 2 204 13 156 131 59 119 239 64 89 73 9 131 7 27 62 110 213 142 173 179 199 242 135 242 182 11 209 24 114 214 243 154 92 127 248 187 232 90 197 33 4 86 86 86 124 200 89 207 229 230 230 208 55 4 118 54 36 205 195 138 29 112 181 52 10 167 78 157 194 136 175 135 99 227 186 53 136 89 181 2 153 59 51 80 243 162 134 159 45 77 153 50 101 204 71 9 156 61 139 246 154 174 33 101 114 86 243 32 6 57 47 59 242 187 247 215 141 127 99 117 250 189 241 253 251 15 253 194 71 225 247 223 127 71 209 209 163 252 80 43 46 62 14 44 182 125 125 125 249 105 93 115 36 206 80 204 15 161 137 123 162 248 40 42 43 42 176 58 50 130 103 99 7 123 59 190 130 253 168 243 52 7 218 48 101 82 249 210 181 82 206 34 24 114 22 115 27 16 12 89 19 127 170 179 182 230 32 186 143 149 193 240 88 148 200 9 176 181 16 27 133 243 255 57 15 35 35 35 238 52 251 176 71 239 192 228 201 147 217 167 41 216 218 217 33 44 60 12 9 180 148 112 117 117 161 140 157 72 73 239 8 182 198 173 199 129 236 253 40 43 43 227 182 6 13 28 240 180 85 4 174 93 187 166 171 168 164 244 72 66 86 5 178 166 1 144 51 15 228 144 25 226 45 174 139 218 90 42 19 147 146 235 151 196 212 147 15 31 61 196 166 77 155 196 203 4 230 184 41 141 198 1 210 248 172 172 44 44 95 22 142 130 188 92 238 244 142 196 173 72 217 182 153 148 235 54 39 47 90 208 49 129 249 40 1 118 3 49 150 39 201 27 168 211 189 199 249 198 195 44 61 208 5 114 35 103 183 26 122 174 139 248 92 96 36 30 62 124 200 227 63 44 44 140 206 74 229 112 232 208 65 196 199 197 194 100 168 17 220 156 199 96 254 220 64 20 23 29 197 6 202 214 145 43 194 145 153 145 206 157 255 254 135 239 249 243 65 65 65 235 90 229 188 232 38 138 93 153 210 210 210 174 36 125 131 119 238 220 51 138 178 225 240 168 132 93 147 213 237 130 171 254 9 9 219 217 235 97 97 110 33 158 15 204 169 171 215 174 194 147 52 222 214 154 200 153 13 135 187 139 19 102 76 243 71 228 202 21 180 79 40 228 100 89 220 187 185 187 241 231 70 59 56 124 218 103 167 134 4 215 142 178 180 20 197 108 7 150 185 175 92 185 162 191 109 247 65 143 161 126 203 142 18 17 97 107 200 24 79 137 224 91 71 230 12 91 117 82 178 228 189 203 150 7 101 148 39 216 230 133 57 45 218 157 229 230 230 226 235 175 134 241 251 199 123 141 255 252 15 30 141 135 142 72 181 101 33 70 47 239 124 225 194 133 94 5 5 197 198 75 55 166 77 247 252 113 125 236 200 233 171 178 134 250 45 207 35 114 121 198 83 87 252 98 53 43 42 221 55 116 99 228 134 212 125 94 231 206 157 51 74 75 79 123 44 218 42 50 137 245 241 241 65 44 133 81 66 98 2 22 204 159 79 31 188 187 240 239 7 76 102 217 58 232 214 173 91 255 187 127 8 105 24 157 182 84 74 177 37 8 77 84 69 54 66 87 175 94 85 163 88 87 99 101 85 85 149 50 109 31 21 168 119 101 89 118 103 228 133 66 161 220 145 35 71 14 218 210 54 146 237 23 68 132 88 249 149 137 49 251 159 140 87 180 220 111 241 168 253 191 139 42 76 73 127 232 241 222 0 0 0 0 73 69 78 68 174 66 96 130]!

initialize
	"Private - Initialize the receiver's class variables
		self initialize
	"

	Smalltalk developmentSystem addSystemFolderIcon: self systemFolderIcon
		to: Smalltalk developmentSystem sourceTrackingToolsFolder!

serverPort
	ServerPort ifNil: [ServerPort := self defaultPort].
	^ServerPort!

serverPort: anInteger 
	ServerPort := anInteger!

show
	StsManager current isConnected ifFalse: [StsManager install].
	StsManager current isConnected ifFalse: [^self].
	super show!

systemFolderIcon
	^SmalltalkSystemIcon show: self description: self displayString!

uninitialize
	"Private - Uninitialize the receiver as it is about to be removed from the system.
		self uninitialize
	"

	Smalltalk developmentSystem removeSystemFolderIcon: self systemFolderIcon! !
!StsServerShell class categoriesFor: #defaultPort!constants!private! !
!StsServerShell class categoriesFor: #displayOn:!displaying!public! !
!StsServerShell class categoriesFor: #icon!constants!public! !
!StsServerShell class categoriesFor: #initialize!development!initializing!private! !
!StsServerShell class categoriesFor: #serverPort!accessing!public! !
!StsServerShell class categoriesFor: #serverPort:!accessing!public! !
!StsServerShell class categoriesFor: #show!public! !
!StsServerShell class categoriesFor: #systemFolderIcon!development!initializing!private! !
!StsServerShell class categoriesFor: #uninitialize!development!initializing!private! !

