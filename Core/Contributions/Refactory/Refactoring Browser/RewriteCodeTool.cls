"Filed out from Dolphin Smalltalk 2000 release 4.01"!

CodeTool subclass: #RewriteCodeTool
	instanceVariableNames: 'rewriteRuleEditor'
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!
RewriteCodeTool comment: ''!

RewriteCodeTool guid: (GUID fromString: '{A8B6C1C1-0E73-11D5-B80B-000102677BBF}')!

!RewriteCodeTool categoriesForClass!Unclassified! !
!RewriteCodeTool methodsFor!

applicationEnvironment
	^ApplicationEnvironment onEnvironment: self environment
		applications: self applications!

buildInterfaceIn: aWidget 
	self rewriteRuleEditor buildInterfaceIn: aWidget!

classEnvironment
	| environment apps |
	apps := self applications.
	environment := ApplicationClassEnvironment onEnvironment: self environment.
	self nonMetaClasses do: 
			[:each | 
			(each applications select: [:app | apps includes: app]) do: 
					[:app | 
					environment
						addClass: each in: app;
						addClass: each class in: app]].
	^environment!

isEditing
	^false!

postBuild
	super postBuild.
	self rewriteRuleEditor hideSelectMethodsButton!

protocolEnvironment
	^(ProtocolEnvironment 
		onEnvironment: self environment
		class: self selectedClass
		protocols: self protocols) & self applicationEnvironment!

rewriteRuleEditor
	"This method was generated by UIDefiner.  Any edits made here
	may be lost whenever methods are automatically defined.  The
	initialization provided below may have been preempted by an
	initialize method."

	^rewriteRuleEditor isNil
		ifTrue:
			[rewriteRuleEditor := RewriteRuleEditor new]
		ifFalse:
			[rewriteRuleEditor]!

selectedEnvironment
	self selector notNil ifTrue: [^self selectorEnvironment].
	self protocol notNil ifTrue: [^self protocolEnvironment].
	self selectedClass notNil ifTrue: [^self classEnvironment].
	self application notNil ifTrue: [^self applicationEnvironment].
	^SelectorEnvironment new!

selectorEnvironment
	^SelectorEnvironment 
		onMethods: self selectors
		forClass: self selectedClass
		in: self environment!

subcanvases
	^super subcanvases copyWith: self rewriteRuleEditor!

updateContents
	super updateContents.
	self rewriteRuleEditor environment: self selectedEnvironment! !
!RewriteCodeTool categoriesFor: #applicationEnvironment!*-compilation failures!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #buildInterfaceIn:!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #classEnvironment!*-compilation failures!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #isEditing!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #postBuild!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #protocolEnvironment!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #rewriteRuleEditor!*-compilation failures!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #selectedEnvironment!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #selectorEnvironment!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #subcanvases!*-unclassified!public! !
!RewriteCodeTool categoriesFor: #updateContents!*-unclassified!public! !

